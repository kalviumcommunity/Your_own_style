{"ast":null,"code":"import React,{createContext,useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export const ShopContext=/*#__PURE__*/createContext(null);const getDefaultCart=()=>{let cart={};for(let index=0;index<300+1;index++){cart[index]=0;}return cart;};const ShopContextProvider=props=>{const[all_product,setAll_Product]=useState([]);const[cartItems,setCartItems]=useState(getDefaultCart());useEffect(()=>{fetch('http://localhost:4000/allproducts').then(response=>response.json()).then(data=>setAll_Product(data));if(localStorage.getItem('auth-token')){fetch('http://localhost:4000/getcart',{method:'POST',headers:{Accept:'application/json','auth-token':localStorage.getItem('auth-token'),'Content-Type':'application/json'},body:JSON.stringify({})// empty body object\n}).then(response=>response.json()).then(data=>setCartItems(data));}},[]);const addToCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]+1}));if(localStorage.getItem(\"auth-token\")){fetch('http://localhost:4000/addtocart',{method:'POST',headers:{Accept:'application/form-data','auth-token':localStorage.getItem('auth-token'),'Content-type':'application/json'},body:JSON.stringify({\"itemId\":itemId})// Pass itemId in JSON format\n}).then(response=>response.json()).then(data=>console.log(data));}};const removeFromCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]-1}));if(localStorage.getItem(\"auth-token\")){fetch('http://localhost:4000/removefromcart',{method:'POST',headers:{Accept:'application/form-data','auth-token':localStorage.getItem('auth-token'),'Content-type':'application/json'},body:JSON.stringify({\"itemId\":itemId})// Pass itemId in JSON format\n}).then(response=>response.json()).then(data=>console.log(data));}};const getTotalCartAmount=()=>{let totalAmount=0;for(const item in cartItems){if(cartItems[item]>0){let itemInfo=all_product.find(product=>product.id===Number(item));if(itemInfo){totalAmount+=cartItems[item]*itemInfo.new_price;}}}return totalAmount;};const getTotalCartItems=()=>{let totalItem=0;for(const item in cartItems){if(cartItems[item]>0){totalItem+=cartItems[item];}}return totalItem;};const contextValue={getTotalCartItems,getTotalCartAmount,all_product,cartItems,addToCart,removeFromCart};return/*#__PURE__*/_jsx(ShopContext.Provider,{value:contextValue,children:props.children});};export default ShopContextProvider;","map":{"version":3,"names":["React","createContext","useEffect","useState","jsx","_jsx","ShopContext","getDefaultCart","cart","index","ShopContextProvider","props","all_product","setAll_Product","cartItems","setCartItems","fetch","then","response","json","data","localStorage","getItem","method","headers","Accept","body","JSON","stringify","addToCart","itemId","prev","console","log","removeFromCart","getTotalCartAmount","totalAmount","item","itemInfo","find","product","id","Number","new_price","getTotalCartItems","totalItem","contextValue","Provider","value","children"],"sources":["C:/Users/devas/OneDrive/Desktop/CAPSTONE_PROJECT/Your_own_style/Frontend/src/Context/ShopContext.jsx"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\r\n\r\nexport const ShopContext = createContext(null);\r\n\r\nconst getDefaultCart = ()=>{\r\n    let cart = {};\r\n    for (let index = 0; index < 300+1; index++) {\r\n        cart[index] = 0;            \r\n    }\r\n    return cart;\r\n}\r\n\r\nconst ShopContextProvider = (props) => {\r\n    const [all_product, setAll_Product] = useState([]);\r\n    const [cartItems, setCartItems] = useState(getDefaultCart());\r\n\r\n    useEffect(() => {\r\n        fetch('http://localhost:4000/allproducts')\r\n            .then((response) => response.json())\r\n            .then((data) => setAll_Product(data));\r\n\r\n        if (localStorage.getItem('auth-token')) {\r\n            fetch('http://localhost:4000/getcart', {\r\n                method: 'POST',\r\n                headers: {\r\n                    Accept: 'application/json',\r\n                    'auth-token': localStorage.getItem('auth-token'),\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({}), // empty body object\r\n            })\r\n                .then((response) => response.json())\r\n                .then((data) => setCartItems(data));\r\n        }\r\n    }, []);\r\n    \r\n\r\n    \r\n\r\n    \r\n    const addToCart = (itemId) => {\r\n        setCartItems((prev) => ({ ...prev, [itemId]: prev[itemId] + 1 }));\r\n    \r\n        if (localStorage.getItem(\"auth-token\")) {\r\n            fetch('http://localhost:4000/addtocart', {\r\n                method: 'POST',\r\n                headers: {\r\n                    Accept: 'application/form-data',\r\n                    'auth-token': localStorage.getItem('auth-token'),\r\n                    'Content-type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ \"itemId\": itemId }), // Pass itemId in JSON format\r\n            })\r\n                .then((response) => response.json())\r\n                .then((data) => console.log(data));\r\n        }\r\n    }\r\n    \r\n    const removeFromCart = (itemId) => {\r\n        setCartItems((prev) => ({ ...prev, [itemId]: prev[itemId] - 1 }));\r\n        \r\n        if (localStorage.getItem(\"auth-token\")) {\r\n            fetch('http://localhost:4000/removefromcart', {\r\n                method: 'POST',\r\n                headers: {\r\n                    Accept: 'application/form-data',\r\n                    'auth-token': localStorage.getItem('auth-token'),\r\n                    'Content-type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ \"itemId\": itemId }), // Pass itemId in JSON format\r\n            })\r\n                .then((response) => response.json())\r\n                .then((data) => console.log(data));\r\n        }\r\n       \r\n    }\r\n    \r\n    const getTotalCartAmount = ()=>\r\n    {\r\n        let totalAmount = 0;\r\n        for(const item in cartItems)\r\n        {\r\n            if(cartItems[item]>0)\r\n            {\r\n                let  itemInfo = all_product.find((product)=>product.id===Number(item));\r\n                if(itemInfo){\r\n                    totalAmount += cartItems[item]*itemInfo.new_price;\r\n\r\n                }\r\n            }\r\n            \r\n        }\r\n        return totalAmount;\r\n\r\n    }\r\n\r\n    const getTotalCartItems = () =>{\r\n        let totalItem = 0;\r\n        for(const item in cartItems)\r\n        {\r\n            if(cartItems[item] > 0)\r\n            {\r\n                totalItem+=cartItems[item];\r\n            }\r\n        }\r\n        return totalItem;\r\n    }\r\n\r\n\r\n    const contextValue = {getTotalCartItems, getTotalCartAmount, all_product,cartItems,addToCart,removeFromCart };\r\n\r\n    return (\r\n        <ShopContext.Provider value={contextValue}>\r\n            {props.children}\r\n        </ShopContext.Provider>\r\n    );\r\n};\r\n\r\nexport default ShopContextProvider;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}